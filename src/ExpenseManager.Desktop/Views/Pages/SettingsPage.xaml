<UserControl x:Class="ExpenseManager.Desktop.Views.Pages.SettingsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:domain="clr-namespace:ExpenseManager.Domain.Enumerations;assembly=ExpenseManager.Domain"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:extensions="clr-namespace:ExpenseManager.Desktop.Extensions"
             xmlns:converters="clr-namespace:ExpenseManager.Desktop.Converters"
             Background="Transparent">
    <UserControl.Resources>
        <ObjectDataProvider x:Key="CurrencyValues" MethodName="GetValues" ObjectType="{x:Type sys:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="domain:Currency" />
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    <converters:StringNullOrEmptyToVisibilityConverter x:Key="StringNullOrEmptyToVisibilityConverter" />
    <Style x:Key="NoLogoPlaceholderText" TargetType="TextBlock" BasedOn="{StaticResource MutedText}">
        <Setter Property="Visibility" Value="Collapsed" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding HasSelectedLogo}" Value="False">
                <Setter Property="Visibility" Value="Visible" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="NoIconPlaceholderText" TargetType="TextBlock" BasedOn="{StaticResource MutedText}">
        <Setter Property="Visibility" Value="Collapsed" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding HasSelectedIcon}" Value="False">
                <Setter Property="Visibility" Value="Visible" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
    </UserControl.Resources>

    <Grid Margin="32">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Style="{StaticResource Card}" Padding="24">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="1*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="{extensions:TranslateExtension SECTION_PERSONAL_DETAILS}" Style="{StaticResource SubheadingText}" Margin="0,0,0,16" />

                <TextBlock Grid.Row="1" Grid.Column="0" Text="{extensions:TranslateExtension LABEL_NAME}" Margin="0,0,0,4" Style="{StaticResource MutedText}" />
                <TextBox Grid.Row="2" Grid.Column="0" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Grid.Row="3" Grid.Column="0" Text="{extensions:TranslateExtension LABEL_MONTHLY_BUDGET}" Margin="0,16,0,4" Style="{StaticResource MutedText}" />
                <TextBox Grid.Row="4" Grid.Column="0" Text="{Binding MonthlyBudget, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Grid.Row="3" Grid.Column="1" Text="{extensions:TranslateExtension LABEL_PREFERRED_LANGUAGE}" Margin="24,16,0,4" Style="{StaticResource MutedText}" />
                <ComboBox Grid.Row="4" Grid.Column="1" Margin="24,0,0,0"
                          ItemsSource="{Binding AvailableLanguages}"
                          DisplayMemberPath="DisplayName"
                          SelectedValuePath="Code"
                          SelectedValue="{Binding PreferredLanguage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Grid.Row="5" Grid.Column="0" Text="{extensions:TranslateExtension LABEL_PREFERRED_CURRENCY}" Margin="0,16,0,4" Style="{StaticResource MutedText}" />
                <ComboBox Grid.Row="5" Grid.Column="1" Margin="24,0,0,0"
                          ItemsSource="{Binding Source={StaticResource CurrencyValues}}"
                          SelectedItem="{Binding PreferredCurrency, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            </Grid>
        </Border>

        <Border Grid.Row="1" Style="{StaticResource Card}" Padding="24" Margin="0,24,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="260" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="{extensions:TranslateExtension SECTION_BRANDING}" Style="{StaticResource SubheadingText}" Margin="0,0,0,16" />

                <Border Grid.Row="1" Grid.Column="0" Height="140" Width="220" Background="#111821" BorderBrush="{DynamicResource CardBorderBrush}" BorderThickness="1" CornerRadius="12" HorizontalAlignment="Left">
                    <Grid>
                        <Image Source="{Binding LogoPath}" Stretch="Uniform" Margin="8"
                               Visibility="{Binding HasSelectedLogo, Converter={StaticResource BooleanToVisibilityConverter}}" />
                        <TextBlock Text="{extensions:TranslateExtension MESSAGE_NO_LOGO_SELECTED}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   TextAlignment="Center"
                                   Margin="12"
                                   Style="{StaticResource NoLogoPlaceholderText}" />
                    </Grid>
                </Border>

                <StackPanel Grid.Row="1" Grid.Column="1" Margin="24,0,0,0" VerticalAlignment="Top">
                    <TextBlock Text="{extensions:TranslateExtension LABEL_APP_LOGO}" Style="{StaticResource MutedText}" />
                    <TextBlock Text="{extensions:TranslateExtension DESCRIPTION_APP_LOGO}" Style="{StaticResource MutedText}" Margin="0,4,0,12" />
                    <StackPanel Orientation="Horizontal">
                        <Button Content="{extensions:TranslateExtension ACTION_UPLOAD_LOGO}" Command="{Binding UploadLogoCommand}" Width="160" Style="{StaticResource AccentButton}" />
                        <Button Content="{extensions:TranslateExtension ACTION_REMOVE_LOGO}"
                                Command="{Binding RemoveLogoCommand}"
                                Margin="12,0,0,0"
                                Width="160"
                                Style="{StaticResource SidebarLinkButton}"
                                IsEnabled="{Binding HasSelectedLogo}" />
                    </StackPanel>
                </StackPanel>

                <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,18,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="260" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Border Height="110" Width="110" Background="#111821" BorderBrush="{DynamicResource CardBorderBrush}" BorderThickness="1" CornerRadius="12" HorizontalAlignment="Left">
                            <Grid>
                                <Image Source="{Binding IconPath}" Stretch="Uniform" Margin="12"
                                       Visibility="{Binding HasSelectedIcon, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                <TextBlock Text="{extensions:TranslateExtension MESSAGE_NO_ICON_SELECTED}"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           TextAlignment="Center"
                                           Margin="12"
                                           Style="{StaticResource NoIconPlaceholderText}" />
                            </Grid>
                        </Border>
                        <StackPanel Grid.Column="1" Margin="24,0,0,0" VerticalAlignment="Top">
                            <TextBlock Text="{extensions:TranslateExtension LABEL_APP_ICON}" Style="{StaticResource MutedText}" />
                            <TextBlock Text="{extensions:TranslateExtension DESCRIPTION_APP_ICON}" Style="{StaticResource MutedText}" Margin="0,4,0,12" TextWrapping="Wrap" />
                            <StackPanel Orientation="Horizontal">
                                <Button Content="{extensions:TranslateExtension ACTION_UPLOAD_ICON}" Command="{Binding UploadIconCommand}" Width="160" Style="{StaticResource AccentButton}" />
                                <Button Content="{extensions:TranslateExtension ACTION_REMOVE_ICON}"
                                        Command="{Binding RemoveIconCommand}"
                                        Margin="12,0,0,0"
                                        Width="160"
                                        Style="{StaticResource SidebarLinkButton}"
                                        IsEnabled="{Binding HasSelectedIcon}" />
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </StackPanel>

                <StackPanel Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,18,0,0">
                    <TextBlock Text="{extensions:TranslateExtension LABEL_COLOR_SCHEME}" Style="{StaticResource MutedText}" />
                    <ComboBox ItemsSource="{Binding AvailableColorSchemes}"
                              DisplayMemberPath="DisplayName"
                              SelectedValuePath="Scheme"
                              SelectedValue="{Binding SelectedColorScheme, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
            </Grid>
        </Border>

        <Border Grid.Row="2" Style="{StaticResource Card}" Padding="24" Margin="0,24,0,0">
            <StackPanel>
                <TextBlock Text="{extensions:TranslateExtension SECTION_SUPPORT}" Style="{StaticResource SubheadingText}" Margin="0,0,0,12" />
                <TextBlock Text="{extensions:TranslateExtension DESCRIPTION_SUPPORT}" Style="{StaticResource MutedText}" TextWrapping="Wrap" Margin="0,0,0,16" />
                <Button Content="{extensions:TranslateExtension ACTION_BUY_ME_A_COFFEE}" Command="{Binding SupportDeveloperCommand}" Style="{StaticResource AccentButton}" Width="200" />
            </StackPanel>
        </Border>

        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,24,0,0">
            <Button Content="{extensions:TranslateExtension ACTION_BACKUP}" Style="{StaticResource SidebarLinkButton}" Width="180" Margin="0,0,12,0"
                    Command="{Binding BackupDatabaseCommand}" />
            <Button Content="{extensions:TranslateExtension ACTION_SAVE}" Style="{StaticResource AccentButton}" Width="160" Command="{Binding SaveCommand}" />
        </StackPanel>
    </Grid>
</UserControl>
