<Window x:Class="ExpenseManager.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewModels="clr-namespace:ExpenseManager.Desktop.ViewModels"
    xmlns:converters="clr-namespace:ExpenseManager.Desktop.Converters"
    xmlns:views="clr-namespace:ExpenseManager.Desktop.Views.Pages"
             xmlns:extensions="clr-namespace:ExpenseManager.Desktop.Extensions"
        mc:Ignorable="d"
        Title="ExpenseManager"
        WindowStyle="None"
        WindowStartupLocation="CenterScreen"
        Height="768"
        Width="1366"
    ResizeMode="CanResize"
    Background="{DynamicResource BackgroundBrush}">
    <Window.Resources>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    <converters:StringNullOrEmptyToVisibilityConverter x:Key="StringNullOrEmptyToVisibilityConverter" />
        <ItemsPanelTemplate x:Key="SummaryItemsPanel">
            <UniformGrid Columns="4" />
        </ItemsPanelTemplate>
        <ItemsPanelTemplate x:Key="VerticalItemsPanel">
            <StackPanel />
        </ItemsPanelTemplate>
        <DataTemplate DataType="{x:Type viewModels:DashboardViewModel}">
            <views:DashboardPage />
        </DataTemplate>
        <DataTemplate DataType="{x:Type viewModels:ExpensesViewModel}">
            <views:ExpensesPage />
        </DataTemplate>
        <DataTemplate DataType="{x:Type viewModels:CategoriesViewModel}">
            <views:CategoriesPage />
        </DataTemplate>
        <DataTemplate DataType="{x:Type viewModels:ReportsViewModel}">
            <views:ReportsPage />
        </DataTemplate>
        <DataTemplate DataType="{x:Type viewModels:CalendarViewModel}">
            <views:CalendarPage />
        </DataTemplate>
        <DataTemplate DataType="{x:Type viewModels:SettingsViewModel}">
            <views:SettingsPage />
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

    <Border Grid.Column="0"
        Background="{DynamicResource SidebarBrush}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="24,32,24,16">
                    <Image Width="140"
                           Height="80"
                           Source="{Binding LogoSource}"
                           Stretch="Uniform"
                           Visibility="{Binding HasLogo, Converter={StaticResource BooleanToVisibilityConverter}}"
                           Margin="0,0,0,12" />
                    <TextBlock Text="ExpenseManager"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="{DynamicResource PrimaryTextBrush}">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Visible" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding HasLogo}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </StackPanel>

                <StackPanel Grid.Row="1" Margin="24,0,24,24">
                    <TextBlock Text="{extensions:TranslateExtension NAVIGATION_DASHBOARD}" Style="{StaticResource MutedText}" />
                    <Button Content="{extensions:TranslateExtension NAVIGATION_HOME}"
                            Command="{Binding NavigateCommand}"
                            CommandParameter="Dashboard">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource SidebarLinkButton}">
                                <Setter Property="Margin" Value="0,8,0,0" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedNavigationKey}" Value="Dashboard">
                                        <Setter Property="Background" Value="#2217D4EB" />
                                        <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
                                        <Setter Property="FontWeight" Value="SemiBold" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    <StackPanel Margin="0,12,0,0">
                        <Button Content="{extensions:TranslateExtension NAVIGATION_EXPENSES}" Command="{Binding NavigateCommand}" CommandParameter="Expenses">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarLinkButton}">
                                    <Setter Property="Margin" Value="0,4,0,0" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedNavigationKey}" Value="Expenses">
                                            <Setter Property="Background" Value="#2217D4EB" />
                                            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
                                            <Setter Property="FontWeight" Value="SemiBold" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Content="{extensions:TranslateExtension NAVIGATION_CATEGORIES}" Command="{Binding NavigateCommand}" CommandParameter="Categories">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarLinkButton}">
                                    <Setter Property="Margin" Value="0,4,0,0" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedNavigationKey}" Value="Categories">
                                            <Setter Property="Background" Value="#2217D4EB" />
                                            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
                                            <Setter Property="FontWeight" Value="SemiBold" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Content="{extensions:TranslateExtension NAVIGATION_REPORTS}" Command="{Binding NavigateCommand}" CommandParameter="Reports">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarLinkButton}">
                                    <Setter Property="Margin" Value="0,4,0,0" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedNavigationKey}" Value="Reports">
                                            <Setter Property="Background" Value="#2217D4EB" />
                                            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
                                            <Setter Property="FontWeight" Value="SemiBold" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Content="{extensions:TranslateExtension NAVIGATION_CALENDAR}" Command="{Binding NavigateCommand}" CommandParameter="Calendar">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarLinkButton}">
                                    <Setter Property="Margin" Value="0,4,0,0" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedNavigationKey}" Value="Calendar">
                                            <Setter Property="Background" Value="#2217D4EB" />
                                            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
                                            <Setter Property="FontWeight" Value="SemiBold" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Content="{extensions:TranslateExtension NAVIGATION_SETTINGS}" Command="{Binding NavigateCommand}" CommandParameter="Settings">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SidebarLinkButton}">
                                    <Setter Property="Margin" Value="0,4,0,0" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedNavigationKey}" Value="Settings">
                                            <Setter Property="Background" Value="#2217D4EB" />
                                            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}" />
                                            <Setter Property="FontWeight" Value="SemiBold" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                </StackPanel>

                <Border Grid.Row="3"
                        Margin="24,0,24,24"
                        Background="{DynamicResource CardBrush}"
                        CornerRadius="12"
                        Padding="16">
                    <StackPanel Orientation="Horizontal">
                        <Border Width="42" Height="42" CornerRadius="21" Background="{DynamicResource AccentBrush}" />
                        <StackPanel Margin="12,0,0,0">
                            <TextBlock Text="{Binding CurrentUserName}" FontWeight="SemiBold" />
                            <TextBlock Text="{Binding CurrentUserHandle}" Style="{StaticResource MutedText}" />
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

        <Border Grid.Row="0"
            Padding="32,24"
            Background="{DynamicResource BackgroundBrush}"
                    MouseDown="OnHeaderMouseDown">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Vertical">
                        <TextBlock Text="{Binding CurrentPageTitle}" Style="{StaticResource HeadingText}" />
                        <TextBlock Text="{Binding CurrentPageSubtitle}" Style="{StaticResource MutedText}" Margin="0,4,0,0" />
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top">
                        <Button Style="{StaticResource WindowControlButton}"
                                Content="&#xE921;"
                                FontFamily="Segoe MDL2 Assets"
                                Click="OnMinimizeClicked" />
            <Button x:Name="WindowStateButton"
                Style="{StaticResource WindowControlButton}"
                Content="&#xE922;"
                FontFamily="Segoe MDL2 Assets"
                Click="OnToggleWindowStateClicked" />
                        <Button Style="{StaticResource WindowControlButton}"
                                Content="&#xE8BB;"
                                FontFamily="Segoe MDL2 Assets"
                                Click="OnCloseClicked" />
                    </StackPanel>
                </Grid>
            </Border>

            <ScrollViewer Grid.Row="1"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled">
                <ContentControl Content="{Binding CurrentViewModel}"
                                Style="{StaticResource PageHostContentControl}" />
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>
